<core:FragmentDefinition xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form">
    <VBox>
        <IconTabBar items="{order>/order/phases}" expandable="false" class="sapUiResponsivePadding--header sapUiResponsivePadding--content">
            <items>
                <IconTabFilter text="{path: 'order>', formatter : '.formatter.iconTabFilterTextFormat'}" iconColor="{path: 'order>', formatter : '.formatter.iconTabFilterColorFormat'}" key="{order>phaseId}">
                    <Table items="{order>operations}" fixedLayout="false">
                        <columns>
                            <Column width="4em" vAlign="Top">
                                <Text text="{i18n>OperationTable.Operation}"/>
                            </Column>
                            <Column width="6em" vAlign="Top">
                                <Text text="{i18n>OperationTable.WorkCenter}" />
                            </Column>
                            <Column minScreenWidth="Tablet" demandPopin="true" vAlign="Top">
                                <Text text="{i18n>OperationTable.Decription}" />
                            </Column>
                            <Column minScreenWidth="Tablet" demandPopin="true" width="12em" vAlign="Top">
                                <Text text="{i18n>OperationTable.Executor}" />
                            </Column>
                            <Column minScreenWidth="Tablet" demandPopin="true" width="4em" vAlign="Top">
                                <Text text="{i18n>OperationTable.Status}" />
                            </Column>
                            <Column minScreenWidth="Tablet" demandPopin="true" width="6em" vAlign="Top">
                                <Text text="{i18n>OperationTable.DateTimeConfirmation}" />
                            </Column>
                            <Column minScreenWidth="Tablet" demandPopin="true" visible="{viewModel>/edit}" width="4em">
                                <Text text="{i18n>OperationTable.ActualWork}" />
                            </Column>
                            <Column width="6%" visible="{viewModel>/edit}"/>
                            <Column width="6%" visible="{viewModel>/edit}"/>
                            <Column width="6%" visible="{viewModel>/edit}"/>
                            <Column width="6%" />
                        </columns>
                        <items>
                            <ColumnListItem highlight="{path: 'order>', formatter : '.formatter.highlightedOperationFormat'}">
                                <cells>
                                    <Text text="{order>operationNumber}" />
                                    <Text text="{order>workCenter}" />
                                    <Text text="{order>description} {path: 'order>remark', formatter : '.formatter.removeWhiteSpacingFormat'}" />
                                    <VBox items="{path:'order>confirmations', templateShareable:false}">
                                        <Text text="{order>firstName} {order>lastName}" />
                                    </VBox>
                                    <VBox items="{path:'order>confirmations', templateShareable:false}">
                                        <Text text="{order>status}" />
                                    </VBox>
                                    <VBox items="{path:'order>confirmations', templateShareable:false}">
                                        <Text text="{path:'order>startDate', type: 'sap.ui.model.type.Date', formatOptions: { pattern: 'dd/MM/yyyy', UTC: true } }" />
                                    </VBox>
                                    <Input type="Number" placeholder="{i18n>OperationTable.ActualWorkPlaceholder}" value="{order>actualWork}" />
                                    <ToggleButton text="{i18n>OperationTable.OK}" type="Accept" pressed="{= ${order>newStatus} === 'E0002'}" visible="{viewModel>/edit}" press="onStatusButtonsPress" width="100%" />
                                    <ToggleButton text="{i18n>OperationTable.NOK}" type="Reject" pressed="{= ${order>newStatus} === 'E0003'}" visible="{viewModel>/edit}" press="onStatusButtonsPress" width="100%" />
                                    <ToggleButton text="{i18n>OperationTable.NA}" type="Default" pressed="{= ${order>newStatus} === 'E0009'}" visible="{viewModel>/edit}" press="onStatusButtonsPress" width="100%" />
                                    <Button icon="sap-icon://measuring-point" tooltip="{i18n>OrderDetail.MeasurePoints}" press="showMeasurePoints($event, ${order>})" visible="{order>measurementNeeded}" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </IconTabFilter>
            </items>
        </IconTabBar>
    </VBox>
</core:FragmentDefinition>