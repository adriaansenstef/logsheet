<core:FragmentDefinition xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form">
    <VBox>
        <IconTabBar items="{order>/order/phases}" expandable="false" select="onPhaseSelect" class="sapUiResponsivePadding--header sapUiResponsivePadding--content">
            <items>
                <IconTabFilter text="{path: 'order>', formatter : '.iconTabFilterTextFormat'}" iconColor="{path: 'order>', formatter : '.iconTabFilterColorFormat'}" key="{order>phaseId}">
                    <Table items="{order>operations}">
                        <columns>
                            <Column width="12em">
                                <Text text="{i18n>OperationTable.OperationNumber}" />
                            </Column>
                            <Column width="12em">
                                <Text text="{i18n>OperationTable.WorkCenter}" />
                            </Column>
                            <Column minScreenWidth="Tablet" demandPopin="true">
                                <Text text="{i18n>OperationTable.Decription}" />
                            </Column>
                            <Column minScreenWidth="Tablet" demandPopin="true">
                                <Text text="{i18n>OperationTable.Executor}" />
                            </Column>
                            <Column minScreenWidth="Tablet" demandPopin="true">
                                <Text text="{i18n>OperationTable.Status}" />
                            </Column>
                            <Column minScreenWidth="Tablet" demandPopin="true">
                                <Text text="{i18n>OperationTable.DateTimeConfirmation}" />
                            </Column>
                            <Column width="6%" />
                            <Column width="6%" />
                            <Column width="6%" />
                            <Column width="6%" />
                        </columns>
                        <items>
                            <ColumnListItem highlight="{= ${order>newStatus} === 'E0003' ? 'Error' : 'None'}">
                                <cells>
                                    <Text text="{order>operationNumber}" />
                                    <Text text="{order>workCenter}" />
                                    <Text text="{order>remark}" />
                                    <VBox items="{path:'order>confirmations', templateShareable:false}">
                                        <Text text="{order>firstName} {order>lastName}" />
                                    </VBox>
                                    <VBox items="{path:'order>confirmations', templateShareable:false}">
                                        <Text text="{order>status}" />
                                    </VBox>
                                    <VBox items="{path:'order>confirmations', templateShareable:false}">
                                        <Text text="{path:'order>startDate', type: 'sap.ui.model.type.Date', formatOptions: { pattern: 'dd/MM/yyyy', UTC: true } }" />
                                    </VBox>
                                    <ToggleButton text="{i18n>OperationTable.OK}" type="Accept" pressed="{= ${order>newStatus} === 'E0002'? true : false }" enabled="{viewModel>/edit}" press="onStatusButtonsPress" width="100%" />
                                    <ToggleButton text="{i18n>OperationTable.NOK}" type="Reject" pressed="{= ${order>newStatus} === 'E0003'? true : false }" enabled="{viewModel>/edit}" press="onStatusButtonsPress" width="100%" />
                                    <ToggleButton text="{i18n>OperationTable.NA}" type="Default" pressed="{= ${order>newStatus} === 'E0009'? true : false }" enabled="{viewModel>/edit}" press="onStatusButtonsPress" width="100%" />
                                    <Button icon="sap-icon://measuring-point" tooltip="{i18n>OrderDetail.MeasurePoints}" press="showMeasurePoints($event, ${order>})" visible="{order>measurementNeeded}" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </IconTabFilter>
            </items>
        </IconTabBar>
    </VBox>
</core:FragmentDefinition>